<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auction Items</title>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #f4f4f4; /* Set background color */
    }
    .container {
        background-color: #ddd; /* Set background color for container */
        padding: 20px;
        border-radius: 10px; /* Add border radius */
        text-align: center;
    }
    .button {
        background-color: green; /* Set button background color to green */
        color: white; /* Set button text color to white */
        border: none;
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        border-radius: 5px;
        cursor: pointer;
    }
    .item-container {
        margin-bottom: 20px;
    }
    .participant-button {
        margin-right: 10px;
    }
</style>
</head>
<body>
<div class="container">
    <h2>Auction Items</h2>
    <div class="item-container visible" id="item1">
        <h3>{{ items[0][0] }}</h3>
        <p>Base Price: {{ items[0][1] }}</p>
        <div id="bidInfo1">
            <p>Bid Price: {{ items[0][1] }}</p>
        </div>
        <div id="participantButtons">
            {% for i in range(1, num_participants + 1) %}
            <button class="participant-button" onclick="bid('{{ participant_names[i-1] }}')"> {{ participant_names[i-1] }}</button>
            {% endfor %}
        </div>
    </div>
    <form id="soldForm" action="" method="post">
        <button type="button" class="button" onclick="sold()">Sold</button>
    </form>
    <div id="auctionOver"></div>

    <script>
        var currentItemId = 1;
        var numItems = {num_items};
        var bidPrice = parseFloat("{{ items[0][1] }}");
        var lastBidder = '';

        function bid(participantName) {
            var bidInfo = document.getElementById("bidInfo" + currentItemId);
            var fixedPrice = parseFloat("{{ items[currentItemId-1][2] }}"); // Get the fixed price for the current item
            bidPrice += fixedPrice; // Increment bid price
            bidInfo.innerHTML = "<p>Bid Price: " + bidPrice.toFixed(2) + "</p>"; // Display bid price with 2 decimal places

            lastBidder = participantName;
        }

        function showNext() {
            currentItemId++;
            if (currentItemId > numItems) {
                document.getElementById("soldForm").style.display = "none";
                document.getElementById("auctionOver").innerHTML = "<strong>Auction is over</strong>";
                return; // Auction is over
            }

            var currentItem = document.getElementById("item" + (currentItemId - 1));
            currentItem.classList.remove("visible");

            var nextItem = document.getElementById("item" + currentItemId);
            nextItem.classList.add("visible");

            // Reset bid price and last bidder for the new item
            bidPrice = parseFloat("{{ items[currentItemId-1][1] }}");
            lastBidder = '';
            var bidInfo = document.getElementById("bidInfo" + currentItemId);
            bidInfo.innerHTML = "<p>Bid Price: " + bidPrice.toFixed(2) + "</p>"; // Display bid price with 2 decimal places
        }

        function sold() {
            alert("Sold item to " + lastBidder);
            showNext();
        }

        // Initial setup
        showNext();
    </script>
</div>
</body>
</html>
